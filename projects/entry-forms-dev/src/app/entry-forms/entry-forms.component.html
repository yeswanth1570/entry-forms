<form [formGroup]="dynaForms" >
        <div style="margin: 20px;" fxLayout="column" class="dynaforms">
            <div *ngFor="let field of globalFieldsArray" class="rows" fxLayout="row" fxFlex="100%" fxLayoutAlign=" center">
                <div style="margin: 2% 0px;" fxLayout="column" fxFlex="{{columnSpace}}%"
                    fxLayoutAlign="space-between center" *ngFor="let row of field">
                    <ng-container
                        *ngTemplateOutlet="SelectField;context:{$implicit:row,formGroup:dynaForms}"></ng-container>
                </div>
            </div>
        </div>
    </form>

<ng-template #SelectField let-field let-formGroup="formGroup">
    <div [ngSwitch]="field.fieldType">
        <div *ngSwitchCase="'TEXT'">
            <ng-container *ngTemplateOutlet="TEXT;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'NUMBER'">
            <ng-container *ngTemplateOutlet="NUMBER;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'DECIMAL'">
            <ng-container *ngTemplateOutlet="DECIMAL;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'DATE'">
            <ng-container *ngTemplateOutlet="DATE;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'DATETIME'">
            <ng-container *ngTemplateOutlet="DATETIME;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'COLOR'">
            <ng-container *ngTemplateOutlet="COLOR;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'EMAIL'">
            <ng-container *ngTemplateOutlet="EMAIL;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'PASSWORD'">
            <ng-container *ngTemplateOutlet="PASSWORD;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'TEXTAREA'">
            <ng-container *ngTemplateOutlet="TEXTAREA;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'DROPDOWN'">
            <ng-container *ngTemplateOutlet="DROPDOWN;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'RADIO'">
            <ng-container *ngTemplateOutlet="RADIO;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'CHECKBOX'">
            <ng-container *ngTemplateOutlet="CHECKBOX;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'CUSTOM'">
            <ng-container *ngTemplateOutlet="CUSTOMTEMPLATE[field.templateRefName];context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'FORMULA'">
            <ng-container *ngTemplateOutlet="FORMULA;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
        <div *ngSwitchCase="'SPLIT'">
            <ng-container *ngTemplateOutlet="SPLIT;context:{$implicit:field,formGroup:formGroup}"></ng-container>
        </div>
    </div>
</ng-template>

<ng-template let-fieldInfo let-formGroup="formGroup" #TEXT>
    <div [formGroup]="formGroup" class="text-container" fieldType="TEXT">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <input matInput type="text" placeholder="{{fieldInfo.fieldDisplayName}}"
                [formControlName]="fieldInfo.fieldName" (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>

</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #NUMBER>
    <div [formGroup]="formGroup" class="number-container">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <input matInput type="number" placeholder="{{fieldInfo.fieldDisplayName}}"
                [formControlName]="fieldInfo.fieldName" (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #DECIMAL>
    <div [formGroup]="formGroup" class="decimal-container">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <input matInput type="number" placeholder="{{fieldInfo.fieldDisplayName}}"
                [formControlName]="fieldInfo.fieldName" (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #DATE>
    <div [formGroup]="formGroup" class="date-container">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <input matInput type="date" placeholder="{{fieldInfo.fieldDisplayName}}"
                formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #DATETIME>
    <div [formGroup]="formGroup" class="datetime-container">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <input matInput type="datetime-local" placeholder="{{fieldInfo.fieldDisplayName}}"
                formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #COLOR>
    <div [formGroup]="formGroup" class="color-container">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <input matInput type="color" placeholder="{{fieldInfo.fieldDisplayName}}"
                formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #EMAIL>
    <div [formGroup]="formGroup" class="email-container">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <input matInput type="email" placeholder="{{fieldInfo.fieldDisplayName}}"
                formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #PASSWORD>
    <div [formGroup]="formGroup" class="password-container">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <input matInput [type]="'password'" placeholder="{{fieldInfo.fieldDisplayName}}"
                formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #TEXTAREA>
    <div [formGroup]="formGroup" class="textarea-container">
        <mat-form-field appearance="outline">
            <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
            <textarea matInput placeholder="{{fieldInfo.fieldDisplayName}}"
                formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)"></textarea>
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #DROPDOWN>
    <div [formGroup]="formGroup" class="dropdown-container">
        <mat-form-field appearance="outline">

            <mat-select placeholder="{{fieldInfo.fieldDisplayName}}" formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)">
                <mat-option *ngFor="let option of fieldInfo.options;" [value]="option">{{option}}</mat-option>
            </mat-select>
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #RADIO>
    <div [formGroup]="formGroup" class="radio-container">
        <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label>
        <mat-radio-group formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)">
            <mat-radio-button *ngFor="let option of fieldInfo.options;" [value]="option">{{option}}</mat-radio-button>
        </mat-radio-group>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #CHECKBOX>
    <div [formGroup]="formGroup" class="checkbox-container">  
        <mat-form-field appearance="outline">
        <mat-select multiple placeholder="{{fieldInfo.fieldDisplayName}}" formControlName="{{fieldInfo.fieldName}}" (change)="changeCallback($event,fieldInfo)">
            <mat-option *ngFor="let option of fieldInfo.options;" [value]="option">
              {{option}}</mat-option>     
        </mat-select>
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #FORMULA>
    <div [formGroup]="formGroup" class="formula-container">
        <mat-form-field appearance="outline">
            <!-- <mat-label>{{fieldInfo.fieldDisplayName}}</mat-label> -->
            <input readonly matInput type="text" placeholder="{{fieldInfo.fieldDisplayName}}"
                [formControlName]="fieldInfo.fieldName"  (change)="changeCallback($event,fieldInfo)">
        </mat-form-field>
    </div>
</ng-template>
<ng-template let-fieldInfo let-formGroup="formGroup" #SPLIT>
    <div style="margin: 20px;width: 100%;" fxLayout="column" class="dynaforms">
        <div class="rows" fxLayout="row" fxFlex="100%" fxLayoutAlign=" center">
            <div style="margin: 2% 0px;" class="uniq" fxLayout="column" fxFlex="{{100 / (fieldInfo['fieldsArray'].length)}}%"
            fxLayoutAlign="space-between center" *ngFor="let row of fieldInfo['fieldsArray']">
            <ng-container
                *ngTemplateOutlet="SelectField;context:{$implicit:row,formGroup:formGroup}"></ng-container>
        </div>
        </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
    </div>
</ng-template>